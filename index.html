<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Restaurant Les Guatlles — Roda de Berà</title>
  <meta name="description" content="Restaurant Les Guatlles: cocina casera y catalana en Roda de Berà (Tarragona). Menús, reservas, eventos y ubicación." />
  <meta name="author" content="Restaurant Les Guatlles" />
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />

  <!-- SimpleLightbox stylesheet (progressive enhancement) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.14.1/simple-lightbox.min.css" integrity="sha512-Zl3/+/k6G1nmM3+8gSm0gQ8MlFs2nJ5heRyvrcEymgq6D8N5ZK5A8PBcHPt9ZcwwhYNS0kt4V8XIlFSSUQKZHw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    :root{
      --accent:#8b2e2e;
      --muted:#6b6b6b;
      --bg:#d2b48c;
      --card:#f1e0c6;
      --glass-bg: rgba(255,255,255,0.45); /* sticky glass (same for desktop & mobile) */
      --header-offset: 96px; /* offset used for anchor scrolling */
    }

    /* Reset & base */
    *{box-sizing:border-box;scroll-behavior:smooth}
    html,body{height:100%;margin:0;font-family:Georgia, serif;color:#222;background:var(--bg)}
    a{color:var(--accent);text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:28px}

    /* ---------- STICKY HEADER ---------- */
    header {
      position: fixed;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 40px);
      max-width: 1100px;
      background: var(--glass-bg);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 14px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:10px 18px;
      z-index: 1200;
    }

    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:64px;height:64px;border-radius:10px;overflow:hidden;flex:0 0 64px;background-image:url('https://tse1.mm.bing.net/th/id/OIP.Gi4hYsIc4B3YbKDPpV0b8wAAAA?pid=Api');background-size:cover;background-position:center}
    h1{font-size:1.25rem;margin:0}
    nav ul{list-style:none;margin:0;padding:0;display:flex;gap:12px;align-items:center}
    nav li{padding:6px 10px;border-radius:8px}
    nav a{font-weight:600;cursor:pointer}

    /* hamburger + menu */
    .hamburger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:6px}
    .hamburger span{width:24px;height:3px;background:#222;border-radius:3px;display:block}
    .nav-menu{display:flex;gap:12px;align-items:center}

    .lang-switch{display:flex;gap:8px;align-items:center}
    .lang-switch button{background:none;border:none;cursor:pointer;padding:0}
    .lang-switch img{width:28px;height:20px;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.15)}

    /* Hero */
    .hero-banner{position:relative;height:60vh;min-height:400px;display:flex;align-items:center;justify-content:center;background-image:url('https://tse2.mm.bing.net/th/id/OIP.O7ewhGLgfSO-NGCan1UeLAHaFj?pid=Api');background-size:cover;background-position:center;color:#fff;text-align:center;margin-top:84px}
    .hero-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.45)}
    .hero-content{position:relative;z-index:1;max-width:800px;padding:20px}
    .hero-content h1{font-size:2.5rem;font-family:'Merriweather',serif;margin-bottom:12px}
    .hero-content p{font-size:1.2rem;line-height:1.4}

    main{margin-top:24px;padding-bottom:80px}
    /* evita que el sticky tape la sección cuando se hace scroll por anclas */
    section{ scroll-margin-top: var(--header-offset); }

    /* cards, menu, gallery */
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(12,12,12,0.1);margin-bottom:20px}
    .contact-list{display:flex;flex-direction:column;gap:8px}
    .contact-item{display:flex;gap:10px;align-items:center}
    .muted{color:var(--muted)}
    .menu-list{display:flex;flex-direction:column;gap:12px}
    .menu-item{display:flex;justify-content:space-between;border-bottom:1px dashed #aaa;padding-bottom:8px}
    .menu-item:last-child{border-bottom:0}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .gallery button{border:0;padding:0;background:none}
    .gallery img{width:100%;height:120px;object-fit:cover;border-radius:8px;display:block}
    footer{margin-top:28px;padding:20px 0;color:var(--muted);font-size:0.9rem;text-align:center;display:flex;justify-content:space-between;align-items:center}

    /* schedule table */
    .schedule{width:100%;border-collapse:collapse;margin-top:10px}
    .schedule th,.schedule td{padding:8px;border-bottom:1px solid #999;text-align:left}
    .schedule th{background:#e2cda0}

    /* lightbox modal custom */
    .gl-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.75);display:none;align-items:center;justify-content:center;z-index:1400;padding:20px}
    .gl-overlay.active{display:flex}
    .gl-content{max-width:1100px;max-height:90vh;width:100%;display:flex;align-items:center;justify-content:center;position:relative}
    .gl-content img{max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 20px 60px rgba(0,0,0,.6)}
    .gl-close{position:absolute;top:12px;right:12px;background:rgba(255,255,255,0.9);border-radius:8px;padding:6px;cursor:pointer}
    .gl-nav{position:absolute;left:12px;right:12px;top:50%;transform:translateY(-50%);display:flex;justify-content:space-between;pointer-events:none}
    .gl-nav button{pointer-events:auto;background:rgba(255,255,255,0.85);border:0;padding:8px;border-radius:8px;cursor:pointer}

    /* WhatsApp button */
    .whatsapp-btn{position:fixed;bottom:20px;right:20px;background:#25d366;border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,.3);z-index:1300}
    .whatsapp-btn img{width:35px;height:35px}

    /* small improvements */
    label > span.i18 {display:inline-block;margin-right:8px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* ---------- RESPONSIVE: MOBIL (sticky smaller + stacked) ---------- */
    @media (max-width:900px){
      .gallery{grid-template-columns:repeat(2,1fr)}
      .hero-banner{height:50vh}
    }

    @media (max-width:768px){
      /* header: apilar verticalmente: nombre arriba, debajo fila con hamburguesa + banderas */
      header{
        flex-direction: column;
        align-items:stretch;
        padding:10px;
      }
      /* brand: centrado, nombre en una línea si cabe */
      .brand{display:flex;justify-content:center;padding:0;margin:0}
      .brand .logo{display:none}
      .brand h1{
        font-size:1rem;
        margin:0;
        text-align:center;
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
        color:#222;
      }

      /* nav row (hamburger + flags) debajo del título */
      .nav-menu{
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding:8px 6px 0 6px;
      }
      .hamburger{display:flex;align-self:center}
      .hamburger span{background:#222}

      /* dropdown menu absolute under the sticky */
      nav ul{
        position: absolute;
        top: calc(100% + 6px);
        left: 12px;
        right: 12px;
        margin-top:0;
        background: var(--glass-bg);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: 12px;
        padding: 12px;
        flex-direction: column;
        display: none;
        gap: 12px;
        box-shadow: 0 8px 30px rgba(0,0,0,.18);
        z-index: 1250;
      }
      nav ul.active{ display:flex; }
      .lang-switch{gap:6px}
      /* slightly smaller hero on very small screens */
      .hero-content h1{font-size:1.8rem}
    }

    @media (max-width:520px){
      .gallery img{height:90px}
      .hero-content h1{font-size:1.6rem}
    }
  </style>
</head>
<body>
  <!-- HEADER / STICKY -->
  <header class="container" role="banner" aria-label="Barra principal">
    <div class="brand" aria-hidden="false">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1 data-i18n="title">Restaurant Les Guatlles</h1>
        <!-- se oculta en móvil para dejar solo el nombre (se controla por CSS) -->
        <div class="muted" data-i18n="location" style="font-size:0.85rem;color:var(--muted)">Roda de Berà — Tarragona</div>
      </div>
    </div>

    <div class="nav-menu" aria-hidden="false">
      <!-- hamburguesa (visible en móvil) -->
      <div class="hamburger" id="hamburger" aria-label="Abrir menú" role="button" tabindex="0" aria-expanded="false">
        <span></span><span></span><span></span>
      </div>

      <nav aria-label="Navegación principal">
        <ul id="nav-links" class="nav-links" role="menu">
          <li role="none"><a role="menuitem" href="#sobre" data-i18n="menu_about">Sobre</a></li>
          <li role="none"><a role="menuitem" href="#menu" data-i18n="menu_menu">Carta</a></li>
          <li role="none"><a role="menuitem" href="#eventos" data-i18n="menu_events">Eventos</a></li>
          <li role="none"><a role="menuitem" href="#reservas" data-i18n="menu_reserve">Reservas</a></li>
          <li role="none"><a role="menuitem" href="#horario" data-i18n="menu_hours">Horario</a></li>
          <li role="none"><a role="menuitem" href="#ubicacion" data-i18n="menu_location">Ubicación</a></li>
          <li role="none"><a role="menuitem" href="#galeria" data-i18n="menu_gallery">Galería</a></li>
        </ul>
      </nav>

      <div class="lang-switch" aria-label="Selector de idioma">
        <button data-lang="es" aria-label="Español"><img src="https://flagcdn.com/es.svg" alt="Español"></button>
        <button data-lang="ca" aria-label="Català"><img src="https://upload.wikimedia.org/wikipedia/commons/c/ce/Flag_of_Catalonia.svg" alt="Català"></button>
        <button data-lang="en" aria-label="English"><img src="https://flagcdn.com/gb.svg" alt="English"></button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero-banner" aria-hidden="false">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1 data-i18n="hero_title">Restaurant Les Guatlles</h1>
      <p data-i18n="hero_sub">Cocina catalana y casera en un entorno rústico y familiar.</p>
    </div>
  </section>

  <!-- MAIN -->
  <main class="container" id="maincontent" role="main">
    <section id="sobre" class="card" tabindex="-1">
      <h2 data-i18n="menu_about">Sobre</h2>
      <p data-i18n="about_text">En Les Guatlles ofrecemos cocina catalana auténtica en un ambiente rústico y moderno. Nuestro espacio está rodeado de naturaleza y pensado para disfrutar en familia.</p>
    </section>

    <section id="menu" class="card">
      <h2 data-i18n="menu_menu">Carta</h2>
      <div class="menu-list" aria-label="Carta">
        <div class="menu-item"><span data-i18n="dish1">Guatlles a la brasa</span><span>12 €</span></div>
        <div class="menu-item"><span data-i18n="dish2">Calçots con salsa romesco</span><span>10 €</span></div>
        <div class="menu-item"><span data-i18n="dish3">Carn a la brasa</span><span>15 €</span></div>
      </div>
    </section>

    <section id="eventos" class="card">
      <h2 data-i18n="menu_events">Eventos</h2>
      <p data-i18n="events_text">Organizamos calçotades, cenas de grupo y celebraciones familiares en nuestro espacio rústico. Consulta disponibilidad para tu evento especial.</p>
    </section>

    <!-- RESERVAS (sustituye al formulario anterior) -->
    <section id="reservas" class="card">
      <h2 data-i18n="menu_reserve">Reservas</h2>
      <p data-i18n="reserve_text">Para reservar, por favor llámanos al <strong>+34 977 80 90 22</strong>.</p>
    </section>

    <!-- HORARIO: tabla lista para rellenar (días traducibles) -->
    <section id="horario" class="card">
      <h2 data-i18n="menu_hours">Horario</h2>
      <table class="schedule" aria-label="Horario">
        <thead>
          <tr>
            <th data-i18n="day">Día</th>
            <th data-i18n="hours">Horario</th>
          </tr>
        </thead>
        <tbody>
        <tr><td data-i18n="monday">Lunes</td><td class="closed">CERRADO</td></tr>
        <tr><td data-i18n="tuesday">Martes</td><td class="closed">CERRADO</td></tr>
        <tr><td data-i18n="wednesday">Miércoles</td><td class="closed">CERRADO</td></tr>
        <tr><td data-i18n="thursday">Jueves</td><td class="closed">CERRADO</td></tr>
        <tr><td data-i18n="friday">Viernes</td><td class="closed">CERRADO</td></tr>
        <tr><td data-i18n="saturday">Sábado</td><td>13:00 - 15:30</td></tr>
        <tr><td data-i18n="sunday">Domingo</td><td>13:00 - 15:30</td></tr>
        </tbody>
      </table>
    </section>

    <!-- UBICACIÓN -->
    <section id="ubicacion" class="card">
      <h2 data-i18n="menu_location">Ubicación</h2>
      <p data-i18n="address">Disseminat, 8, 43883 Roda de Berà, Tarragona</p>
      <iframe title="Mapa Restaurant Les Guatlles" src="https://www.google.com/maps?q=Restaurant+Les+Guatlles+Roda+de+Berà&output=embed" width="100%" height="250" style="border:0;border-radius:12px" allowfullscreen="" loading="lazy"></iframe>
    </section>

    <!-- GALERÍA -->
    <section id="galeria" class="card">
      <h2 data-i18n="menu_gallery">Galería</h2>
      <div class="gallery" role="list">
        <button data-src="https://tse3.mm.bing.net/th/id/OIP.s-KWYiFmA7SI1_nkqOTiSAHaFj?pid=Api" aria-label="Ver imagen 1"><img src="https://tse3.mm.bing.net/th/id/OIP.s-KWYiFmA7SI1_nkqOTiSAHaFj?pid=Api" alt="Plato típico"></button>
        <button data-src="https://tse2.mm.bing.net/th/id/OIP.NeFWFeG1jl9k7wvETfMcuwHaIW?pid=Api" aria-label="Ver imagen 2"><img src="https://tse2.mm.bing.net/th/id/OIP.NeFWFeG1jl9k7wvETfMcuwHaIW?pid=Api" alt="Interior restaurante"></button>
        <button data-src="https://tse2.mm.bing.net/th/id/OIP.O7ewhGLgfSO-NGCan1UeLAHaFj?pid=Api" aria-label="Ver imagen 3"><img src="https://tse2.mm.bing.net/th/id/OIP.O7ewhGLgfSO-NGCan1UeLAHaFj?pid=Api" alt="Exterior masía"></button>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="container" role="contentinfo">
    <span>© <span id="year"></span> <span data-i18n="title">Restaurant Les Guatlles</span></span>
    <span class="social-icons" aria-label="Redes sociales">
      <a href="https://www.instagram.com/restaurantlesguatlles/?hl=es" target="_blank" rel="noopener">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" width="20" height="20">
      </a>
      <a href="https://www.facebook.com/Restaurantlesguatlles/?locale=es_ES" target="_blank" rel="noopener">
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Facebook_icon.svg" alt="Facebook" width="20" height="20">
      </a>
    </span>
  </footer>

  <!-- WhatsApp flotante -->
<a href="https://wa.me/34977809022" class="whatsapp-btn" target="_blank" rel="noopener" aria-label="Abrir WhatsApp">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
</a>

<style>
  .whatsapp-btn{
    position: fixed;
    bottom: 20px;            /* distancia desde el borde inferior */
    left: 50%;               /* centro horizontal */
    transform: translateX(-50%); /* centra exactamente */
    background:#25d366;
    border-radius:50%;
    width:60px;
    height:60px;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 4px 12px rgba(0,0,0,.3);
    z-index:1300;
  }
  .whatsapp-btn img{
    width:35px;
    height:35px;
  }
</style>

  <!-- Modal lightbox personalizado -->
  <div id="glOverlay" class="gl-overlay" aria-hidden="true" role="dialog" aria-label="Galería imagen">
    <div class="gl-content" role="document">
      <button class="gl-close" id="glClose" aria-label="Cerrar">✕</button>
      <div class="gl-nav">
        <button id="glPrev" aria-label="Imagen anterior">◀</button>
        <button id="glNext" aria-label="Siguiente imagen">▶</button>
      </div>
      <img id="glImage" src="" alt="Imagen ampliada">
    </div>
  </div>

  <!-- SimpleLightbox script (progressive enhancement) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.14.1/simple-lightbox.min.js" integrity="sha512-0G2rF0t1QY3rXdp9r1JqjB3mB6g2T2t7y1dV6k2N9XGZ8V1bE3QeG9S+5X9h1vVz6p0QxwZ4rD1U1uV0G0GRA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    /***********************
     * Variables & helper
     ***********************/
    document.getElementById('year').textContent = new Date().getFullYear();

    // Translations object (ES / CA / EN)
    const translations = {
      es: {
        title: 'Restaurant Les Guatlles',
        location: 'Roda de Berà — Tarragona',
        menu_about: 'Sobre',
        menu_menu: 'Carta',
        menu_events: 'Eventos',
        menu_reserve: 'Reservas',
        reserve_text: 'Para reservar, por favor llámanos al <strong>+34 977 80 90 22</strong>.',
        menu_hours: 'Horario',
        menu_location: 'Ubicación',
        menu_gallery: 'Galería',
        hero_title: 'Restaurant Les Guatlles',
        hero_sub: 'Cocina catalana y casera en un entorno rústico y familiar.',
        about_text: 'En Les Guatlles ofrecemos cocina catalana auténtica en un ambiente rústico y moderno. Nuestro espacio está rodeado de naturaleza y pensado para disfrutar en familia.',
        dish1: 'Guatlles a la brasa',
        dish2: 'Calçots con salsa romesco',
        dish3: 'Carn a la brasa',
        events_text: 'Organizamos calçotades, cenas de grupo y celebraciones familiares en nuestro espacio rústico. Consulta disponibilidad para tu evento especial.',
        address: 'Disseminat, 8, 43883 Roda de Berà, Tarragona',
        day: 'Día',
        hours: 'Horario',
        monday: 'Lunes', tuesday: 'Martes', wednesday: 'Miércoles',
        thursday: 'Jueves', friday: 'Viernes', saturday: 'Sábado', sunday: 'Domingo'
      },
      ca: {
        title: 'Restaurant Les Guatlles',
        location: 'Roda de Berà — Tarragona',
        menu_about: 'Sobre',
        menu_menu: 'Carta',
        menu_events: 'Esdeveniments',
        menu_reserve: 'Reserves',
        reserve_text: 'Per reservar, si us plau truca al <strong>+34 977 80 90 22</strong>.',
        menu_hours: 'Horari',
        menu_location: 'Ubicació',
        menu_gallery: 'Galeria',
        hero_title: 'Restaurant Les Guatlles',
        hero_sub: 'Cuina catalana i casolana en un entorn rústic i familiar.',
        about_text: 'A Les Guatlles oferim cuina catalana autèntica en un ambient rústic i modern. El nostre espai està envoltat de natura i pensat per gaudir en família.',
        dish1: 'Guatlles a la brasa',
        dish2: 'Calçots amb salsa romesco',
        dish3: 'Carn a la brasa',
        events_text: 'Organitzem calçotades, sopars de grup i celebracions familiars al nostre espai rústic. Consulta disponibilitat per al teu esdeveniment especial.',
        address: 'Disseminat, 8, 43883 Roda de Berà, Tarragona',
        day: 'Dia',
        hours: 'Horari',
        monday: 'Dilluns', tuesday: 'Dimarts', wednesday: 'Dimecres',
        thursday: 'Dijous', friday: 'Divendres', saturday: 'Dissabte', sunday: 'Diumenge'
      },
      en: {
        title: 'Restaurant Les Guatlles',
        location: 'Roda de Berà — Tarragona',
        menu_about: 'About',
        menu_menu: 'Menu',
        menu_events: 'Events',
        menu_reserve: 'Reservations',
        reserve_text: 'To reserve, please call us at <strong>+34 977 80 90 22</strong>.',
        menu_hours: 'Opening hours',
        menu_location: 'Location',
        menu_gallery: 'Gallery',
        hero_title: 'Restaurant Les Guatlles',
        hero_sub: 'Catalan homemade cuisine in a rustic and family-friendly environment.',
        about_text: 'At Les Guatlles we offer authentic Catalan cuisine in a rustic yet modern atmosphere. Surrounded by nature, our restaurant is perfect for families.',
        dish1: 'Grilled quails',
        dish2: 'Calçots with romesco sauce',
        dish3: 'Grilled meat',
        events_text: 'We organize calçotades, group dinners and family celebrations in our rustic venue. Check availability for your special event.',
        address: 'Disseminat, 8, 43883 Roda de Berà, Tarragona',
        day: 'Day',
        hours: 'Opening hours',
        monday: 'Monday', tuesday: 'Tuesday', wednesday: 'Wednesday',
        thursday: 'Thursday', friday: 'Friday', saturday: 'Saturday', sunday: 'Sunday'
      }
    };

    // Initialize language from localStorage or default 'es'
    const savedLang = localStorage.getItem('lang') || 'es';
    setLanguage(savedLang);

    // Language buttons
    document.querySelectorAll('.lang-switch button').forEach(btn=>{
      btn.addEventListener('click', ()=> {
        const lang = btn.getAttribute('data-lang');
        setLanguage(lang);
      });
    });

    // Apply translations to elements with data-i18n
    function setLanguage(lang){
      try { localStorage.setItem('lang', lang); } catch(e) {}
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
          // For safety: some fields want HTML (reserve_text)
          if (key === 'reserve_text') {
            el.innerHTML = translations[lang][key];
          } else {
            el.textContent = translations[lang][key];
          }
        }
      });
    }

    /***********************
     * Hamburger & anchor scrolling (offset)
     ***********************/
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('nav-links');

    function toggleMenu() {
      const expanded = hamburger.getAttribute('aria-expanded') === 'true';
      hamburger.setAttribute('aria-expanded', String(!expanded));
      navLinks.classList.toggle('active');
    }
    if (hamburger) {
      hamburger.addEventListener('click', toggleMenu);
      hamburger.addEventListener('keydown', (e)=> {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleMenu(); }
      });
    }

    // Smooth anchor scroll with header offset
    document.querySelectorAll('a[href^="#"]').forEach(link=>{
      link.addEventListener('click', (e)=>{
        const href = link.getAttribute('href');
        const target = document.querySelector(href);
        if (target) {
          e.preventDefault();
          // close mobile menu if open
          navLinks.classList.remove('active');
          hamburger.setAttribute('aria-expanded','false');
          // compute offset from CSS variable
          const rootStyles = getComputedStyle(document.documentElement);
          const headerOffsetStr = rootStyles.getPropertyValue('--header-offset') || '96px';
          const offset = parseInt(headerOffsetStr, 10) || 96;
          const top = target.getBoundingClientRect().top + window.scrollY - offset;
          window.scrollTo({ top, behavior: 'smooth' });
        }
      });
    });

    // Close menu when click outside (optional)
    document.addEventListener('click', (e)=>{
      if (!e.target.closest('header')) {
        navLinks.classList.remove('active');
        hamburger.setAttribute('aria-expanded','false');
      }
    });

    /***********************
     * Gallery modal (custom)
     ***********************/
    const galleryButtons = document.querySelectorAll('.gallery button');
    const overlay = document.getElementById('glOverlay');
    const glImage = document.getElementById('glImage');
    const glClose = document.getElementById('glClose');
    const glPrev = document.getElementById('glPrev');
    const glNext = document.getElementById('glNext');

    let galleryList = Array.from(galleryButtons).map(btn => btn.getAttribute('data-src'));
    let currentIndex = 0;

    function openOverlay(index) {
      currentIndex = index;
      glImage.src = galleryList[currentIndex];
      overlay.classList.add('active');
      overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      // focus for accessibility
      glClose && glClose.focus();
    }
    function closeOverlay() {
      overlay.classList.remove('active');
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      glImage.src = '';
    }
    function showPrev() {
      currentIndex = (currentIndex - 1 + galleryList.length) % galleryList.length;
      glImage.src = galleryList[currentIndex];
    }
    function showNext() {
      currentIndex = (currentIndex + 1) % galleryList.length;
      glImage.src = galleryList[currentIndex];
    }

    galleryButtons.forEach((btn, idx) => btn.addEventListener('click', ()=> openOverlay(idx)));
    glClose && glClose.addEventListener('click', closeOverlay);
    glPrev && glPrev.addEventListener('click', showPrev);
    glNext && glNext.addEventListener('click', showNext);

    // close on overlay click
    overlay && overlay.addEventListener('click', (e)=>{
      if (e.target === overlay) closeOverlay();
    });

    // keyboard nav
    document.addEventListener('keydown', (e)=>{
      if (overlay && overlay.classList.contains('active')) {
        if (e.key === 'Escape') closeOverlay();
        if (e.key === 'ArrowLeft') showPrev();
        if (e.key === 'ArrowRight') showNext();
      }
    });

    // Initialize SimpleLightbox (progressive enhancement, targets anchors)
    try {
      var lightbox = new SimpleLightbox('.gallery a', {});
    } catch(err) { /* ignore if not present */ }

    /***********************
     * Accessibility helpers (optional)
     ***********************/
    // trap focus inside overlay when open (basic)
    document.addEventListener('focus', function(event) {
      if (overlay && overlay.classList.contains('active')) {
        if (!overlay.contains(event.target)) {
          event.stopPropagation();
          glClose && glClose.focus();
        }
      }
    }, true);
  </script>
</body>
</html>
