<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Restaurant Les Guatlles — Roda de Berà</title>
  <meta name="description" content="Restaurant Les Guatlles: cocina casera y catalana en Roda de Berà (Tarragona). Menús, reservas, eventos y ubicación." />
  <meta name="author" content="Restaurant Les Guatlles" />
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- SimpleLightbox -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.14.1/simple-lightbox.min.css" integrity="sha512-Zl3/+/k6G1nmM3+8gSm0gQ8MlFs2nJ5heRyvrcEymgq6D8N5ZK5A8PBcHPt9ZcwwhYNS0kt4V8XIlFSSUQKZHw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    /* === VARIABLES Y ESTILOS BASE === */
    :root {
      --accent: #8b2e2e;
      --muted: #6b6b6b;
      --bg: #d2b48c;
      --card: #f1e0c6;
      --glass-bg: rgba(255,255,255,0.45);
      --header-offset: 96px;
    }

    * {
      box-sizing: border-box;
      scroll-behavior: smooth;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: Georgia, serif;
      color: #222;
      background: var(--bg);
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 28px;
    }

    /* === ANIMACIONES DE ENTRADA === */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-on-scroll {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease-out;
    }

    .animate-on-scroll.animated {
      opacity: 1;
      transform: translateY(0);
    }

    /* === HEADER STICKY === */
    header {
      position: fixed;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 40px);
      max-width: 1100px;
      background: var(--glass-bg);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 14px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 10px 18px;
      z-index: 1200;
      animation: fadeInDown 0.8s ease-out;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo {
      width: 64px;
      height: 64px;
      border-radius: 10px;
      overflow: hidden;
      flex: 0 0 64px;
      background-image: url('https://tse1.mm.bing.net/th/id/OIP.Gi4hYsIc4B3YbKDPpV0b8wAAAA?pid=Api');
      background-size: cover;
      background-position: center;
    }

    h1 {
      font-size: 1.25rem;
      margin: 0;
    }

    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    nav li {
      padding: 6px 10px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    nav li:hover {
      background: rgba(139, 46, 46, 0.1);
    }

    nav a {
      font-weight: 600;
      cursor: pointer;
    }

    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
      padding: 6px;
    }

    .hamburger span {
      width: 24px;
      height: 3px;
      background: #222;
      border-radius: 3px;
      display: block;
      transition: all 0.3s ease;
    }

    .nav-menu {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .lang-switch {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .lang-switch button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      transition: transform 0.3s ease;
    }

    .lang-switch button:hover {
      transform: scale(1.1);
    }

    .lang-switch img {
      width: 28px;
      height: 20px;
      border-radius: 3px;
      box-shadow: 0 0 2px rgba(0,0,0,.15);
    }

    /* === HERO SECTION === */
    .hero-banner {
      position: relative;
      height: 60vh;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-image: url('https://tse2.mm.bing.net/th/id/OIP.O7ewhGLgfSO-NGCan1UeLAHaFj?pid=Api');
      background-size: cover;
      background-position: center;
      color: #fff;
      text-align: center;
      margin-top: 84px;
      animation: fadeInUp 1s ease-out 0.3s both;
    }

    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.45);
    }

    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      padding: 20px;
    }

    .hero-content h1 {
      font-size: 2.5rem;
      font-family: 'Merriweather', serif;
      margin-bottom: 12px;
    }

    .hero-content p {
      font-size: 1.2rem;
      line-height: 1.4;
    }

    /* === MAIN CONTENT === */
    main {
      margin-top: 24px;
      padding-bottom: 80px;
    }

    section {
      scroll-margin-top: var(--header-offset);
    }

    /* === CARDS Y COMPONENTES === */
    .card {
      background: var(--card);
      padding: 18px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(12,12,12,0.1);
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(12,12,12,0.15);
    }

    .contact-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .contact-item {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .muted {
      color: var(--muted);
    }

    .menu-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .menu-item {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dashed #aaa;
      padding-bottom: 8px;
      transition: all 0.3s ease;
    }

    .menu-item:hover {
      transform: translateX(5px);
      border-color: var(--accent);
    }

    .menu-item:last-child {
      border-bottom: 0;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    .gallery button {
      border: 0;
      padding: 0;
      background: none;
      transition: transform 0.3s ease;
    }

    .gallery button:hover {
      transform: scale(1.05);
    }

    .gallery img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      display: block;
    }

    footer {
      margin-top: 28px;
      padding: 20px 0;
      color: var(--muted);
      font-size: 0.9rem;
      text-align: center;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* === HORARIO === */
    .schedule {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    .schedule th, .schedule td {
      padding: 8px;
      border-bottom: 1px solid #999;
      text-align: left;
    }

    .schedule th {
      background: #e2cda0;
    }

    .closed {
      color: #8b2e2e;
      font-weight: bold;
    }

    /* === SECCIONES DESPLEGABLES === */
    .toggle-section.card {
      padding: 18px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(12,12,12,0.1);
      margin-bottom: 20px;
      background: var(--card);
      position: relative;
      transition: all 0.3s ease;
    }
    
    .toggle-section summary {
      cursor: pointer;
      font-weight: bold;
      display: block;
      font-size: 1.1rem;
      padding: 12px 0;
      list-style: none;
    }

    .toggle-section summary::-webkit-details-marker {
      display: none;
    }

    .toggle-section summary .arrow {
      float: right;
      transition: transform 0.3s ease;
    }

    .toggle-section[open] summary .arrow {
      transform: rotate(180deg);
    }

    .toggle-section .contenido {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
    }

    .toggle-section[open] .contenido {
      max-height: 5000px;
    }

    .close-arrow {
      text-align: center;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--accent);
      margin-top: 20px;
      padding: 10px;
      display: block;
      transition: all 0.3s ease;
    }

    .close-arrow:hover {
      color: var(--muted);
      transform: translateY(-2px);
    }

    /* === CALCULADORA DE GRUPOS === */
    .group-calculator {
      background: var(--card);
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      text-align: center;
      border: 2px solid var(--accent);
    }
    
    .calculator-inputs {
      display: flex;
      gap: 15px;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin: 15px 0;
    }
    
    .calc-input {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      width: 80px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .calc-input:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .calc-result {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--accent);
      margin: 15px 0;
    }

    /* === BÚSQUEDA EN CARTA === */
    .search-container {
      margin-bottom: 20px;
    }
    
    .search-box {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #ddd;
      border-radius: 25px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .search-box:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(139, 46, 46, 0.1);
    }

    /* === BOTONES === */
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .btn:hover {
      transform: translateY(-2px);
    }
    
    .btn-primary {
      background: var(--accent);
      color: white;
    }
    
    .btn-primary:hover {
      background: #7a2727;
      box-shadow: 0 4px 12px rgba(139, 46, 46, 0.3);
    }

    /* === WhatsApp flotante === */
    .whatsapp-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #25d366;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,.3);
      z-index: 1300;
      transition: all 0.3s ease;
      animation: fadeInUp 0.8s ease-out 1s both;
    }
    
    .whatsapp-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
    }
    
    .whatsapp-btn img {
      width: 35px;
      height: 35px;
    }

    /* === ASISTENTE VIRTUAL === */
    .assistant-container {
      position: fixed;
      bottom: 90px;
      right: 20px;
      z-index: 1400;
      font-family: Arial, sans-serif;
      animation: fadeInUp 0.8s ease-out 1.2s both;
    }

    .assistant-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #00aaff 0%, #0088cc 100%);
      border: none;
      box-shadow: 0 4px 15px rgba(0, 170, 255, 0.5);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: visible;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    .assistant-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 170, 255, 0.7);
    }

    .assistant-button::after {
      content: "Asistente de IA";
      position: absolute;
      bottom: -35px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.75rem;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
      z-index: 1500;
    }

    .assistant-button:hover::after {
      opacity: 1;
      visibility: visible;
    }

    .assistant-button i {
      color: white;
      font-size: 24px;
    }

    .assistant-chat {
      position: absolute;
      bottom: 70px;
      right: 0;
      width: 320px;
      max-width: 85vw;
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: none;
      flex-direction: column;
      overflow: hidden;
      max-height: 450px;
      border: 1px solid #e0e0e0;
    }

    .assistant-chat.active {
      display: flex;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .assistant-header {
      background: linear-gradient(135deg, #00aaff 0%, #0088cc 100%);
      color: white;
      padding: 12px 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .assistant-header h3 {
      margin: 0;
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .assistant-header h3::before {
      content: '';
      width: 8px;
      height: 8px;
      background: #4ade80;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .assistant-close {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      font-size: 1.1rem;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
      transition: background 0.2s;
    }

    .assistant-close:hover {
      background: rgba(255,255,255,0.3);
    }

    .assistant-messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      max-height: 300px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      background: #f8fafc;
    }

    .message {
      padding: 10px 14px;
      border-radius: 18px;
      max-width: 85%;
      word-wrap: break-word;
      line-height: 1.4;
      font-size: 0.9rem;
      position: relative;
    }

    .message.bot {
      background: white;
      align-self: flex-start;
      border-bottom-left-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border: 1px solid #e2e8f0;
    }

    .message.user {
      background: linear-gradient(135deg, #00aaff 0%, #0088cc 100%);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 6px;
      box-shadow: 0 2px 8px rgba(0, 170, 255, 0.3);
    }

    .assistant-input-container {
      padding: 12px 15px;
      border-top: 1px solid #e2e8f0;
      background: white;
    }

    .assistant-input {
      display: flex;
      gap: 8px;
      align-items: flex-end;
    }

    .assistant-input input {
      flex: 1;
      padding: 10px 14px;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      outline: none;
      font-size: 0.9rem;
      background: #f8fafc;
      transition: all 0.2s;
      font-family: Arial, sans-serif;
    }

    .assistant-input input:focus {
      border-color: #00aaff;
      background: white;
      box-shadow: 0 0 0 3px rgba(0, 170, 255, 0.1);
    }

    .assistant-input button {
      background: linear-gradient(135deg, #00aaff 0%, #0088cc 100%);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 10px 16px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.2s;
      min-width: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .assistant-input button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 170, 255, 0.3);
    }

    .assistant-greeting {
      position: absolute;
      bottom: 70px;
      right: 0;
      background: #2d3748;
      color: white;
      padding: 10px 14px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      max-width: 180px;
      display: none;
      animation: slideUp 0.3s ease;
      border: 1px solid #4a5568;
      font-size: 0.8rem;
      line-height: 1.3;
    }

    .assistant-greeting.active {
      display: block;
    }

    .assistant-greeting p {
      margin: 0 0 8px 0;
    }

    .assistant-greeting button {
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 4px 10px;
      font-size: 0.7rem;
      cursor: pointer;
      float: right;
      transition: all 0.2s;
    }

    .assistant-greeting button:hover {
      background: rgba(255,255,255,0.3);
    }

    /* === RESPONSIVE === */
    @media (max-width:900px){
      .gallery{grid-template-columns:repeat(2,1fr)}
      .hero-banner{height:50vh}
    }

    @media (max-width:768px){
      header{
        flex-direction: column;
        align-items:stretch;
        padding: 2px 8px;
        min-height: auto;
      }
      
      .brand{
        display:flex;
        justify-content:center;
        padding: 0;
        margin: 0;
      }
      .brand .logo{display:none}
      .brand h1{
        font-size: 1rem;
        margin: 0;
        padding: 0;
        text-align:center;
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
        color:#222;
        line-height: 1;
      }

      .nav-menu{
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding: 0px 4px;
        min-height: 24px;
        gap: 0;
      }
      
      .hamburger{
        display:flex;
        align-self:center;
        margin: 0;
        padding: 0;
      }
      .hamburger span{
        background:#222;
      }

      .lang-switch{
        gap: 6px;
        margin: 0;
        padding: 0;
      }

      nav ul{
        position: absolute;
        top: calc(100% + 10px);
        left: 8px;
        right: 8px;
        margin-top:0;
        background: var(--glass-bg);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: 12px;
        padding: 12px;
        flex-direction: column;
        display: none;
        gap: 12px;
        box-shadow: 0 8px 30px rgba(0,0,0,.18);
        z-index: 1250;
      }
      nav ul.active{ display:flex; }
      
      .hero-content h1{font-size:1.8rem}

      .assistant-container {
        bottom: 90px;
        right: 15px;
      }
      
      .assistant-button {
        width: 50px;
        height: 50px;
      }
      
      .assistant-button i {
        font-size: 20px;
      }
      
      .assistant-chat {
        width: calc(100vw - 30px);
        max-width: calc(100vw - 30px);
        right: 0;
        bottom: 70px;
        max-height: 60vh;
      }
      
      .assistant-greeting {
        width: calc(100vw - 60px);
        max-width: calc(100vw - 60px);
        right: 0;
      }
    }

    @media (max-width:520px){
      .gallery img{height:90px}
      .hero-content h1{font-size:1.6rem}
      
      header{
        padding: 1px 6px;
      }
      .nav-menu{
        padding: 0px 3px;
        min-height: 22px;
      }
      
      .assistant-chat {
        max-height: 55vh;
      }
      
      .calculator-inputs {
        flex-direction: column;
        gap: 10px;
      }
    }

    /* Footer redes sociales a la izquierda */
    footer .social-icons {
      order: -1;
      margin-right: auto;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="container" role="banner" aria-label="Barra principal">
    <div class="brand" aria-hidden="false">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1 data-i18n="title">Restaurant Les Guatlles</h1>
        <div class="muted" data-i18n="location" style="font-size:0.85rem;color:var(--muted)">Roda de Berà — Tarragona</div>
      </div>
    </div>

    <div class="nav-menu" aria-hidden="false">
      <div class="hamburger" id="hamburger" aria-label="Abrir menú" role="button" tabindex="0" aria-expanded="false">
        <span></span><span></span><span></span>
      </div>

      <nav aria-label="Navegación principal">
        <ul id="nav-links" class="nav-links" role="menu">
          <li role="none"><a role="menuitem" href="#sobre" data-i18n="menu_about">Inicio</a></li>
          <li role="none"><a role="menuitem" href="#lacarta" data-i18n="menu_menu">La Carta</a></li>
          <li role="none"><a role="menuitem" href="#grupos" data-i18n="menu_groups">Menú Grupos</a></li>
          <li role="none"><a role="menuitem" href="#eventos" data-i18n="menu_events">Eventos</a></li>
          <li role="none"><a role="menuitem" href="#reservas" data-i18n="menu_reserve">Reservas</a></li>
          <li role="none"><a role="menuitem" href="#horario" data-i18n="menu_hours">Horario</a></li>
          <li role="none"><a role="menuitem" href="#ubicacion" data-i18n="menu_location">Ubicación</a></li>
          <li role="none"><a role="menuitem" href="#galeria" data-i18n="menu_gallery">Galería</a></li>
        </ul>
      </nav>

      <div class="lang-switch" aria-label="Selector de idioma">
        <button data-lang="es" aria-label="Español"><img src="https://flagcdn.com/es.svg" alt="Español"></button>
        <button data-lang="ca" aria-label="Català"><img src="https://upload.wikimedia.org/wikipedia/commons/c/ce/Flag_of_Catalonia.svg" alt="Català"></button>
        <button data-lang="en" aria-label="English"><img src="https://flagcdn.com/gb.svg" alt="English"></button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero-banner" aria-hidden="false">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1 data-i18n="hero_title">Restaurant Les Guatlles</h1>
      <p data-i18n="hero_sub">Cocina catalana y casera en un entorno rústico y familiar.</p>
    </div>
  </section>

  <!-- MAIN -->
  <main class="container" id="maincontent" role="main">
    <section id="sobre" class="card animate-on-scroll" tabindex="-1">
      <h2 data-i18n="menu_about">Sobre</h2>
      <p data-i18n="about_text">En Les Guatlles ofrecemos cocina catalana auténtica en un ambiente rústico y moderno. Nuestro espacio está rodeado de naturaleza y pensado para disfrutar en familia.</p>
    </section>

    <!-- ========== LA CARTA CON BÚSQUEDA ========== -->
    <details class="toggle-section card animate-on-scroll" id="La Carta-section">
      <summary><span data-i18n="lacarta_title">La Carta</span> <span class="arrow">▼</span></summary>
      <div class="contenido">
        
        <!-- Barra de búsqueda -->
        <div class="search-container">
          <input type="text" class="search-box" id="cartaSearch" placeholder="Buscar en la carta..." aria-label="Buscar en la carta">
        </div>

        <h3 data-i18n="lacarta_starters">PRIMEROS PLATOS</h3>
        <div class="menu-list" aria-label="Primeros platos">
          <div class="menu-item"><span data-i18n="p_en_salad_house">Ensalada Les Guatlles (lechuga variada, huevos de codorniz, paté, tomates cherry, cebolla frita, frutos secos y vinagre de módena)</span><span>13,90€</span></div>
          <div class="menu-item"><span data-i18n="p_en_salad_green">Ensalada verde (Lechuga, tomate, pimiento, cebolla, atún, huevo, remolacha, zanahoria y aceitunas)</span><span>11,90€</span></div>
          <div class="menu-item"><span data-i18n="p_xato">Xató (escarola, bacalao, atún, anchoas, aceitunas y salsa de romesco)</span><span>14,90€</span></div>
          <div class="menu-item"><span data-i18n="p_escalivada">Escalivada (pimiento y berenjena)</span><span>14,90€</span></div>
          <div class="menu-item"><span data-i18n="p_snails">Caracoles a la llauna</span><span>16,80€</span></div>
          <div class="menu-item"><span data-i18n="p_canelones">Canelones de la abuela</span><span>11,20€</span></div>
          <div class="menu-item"><span data-i18n="p_calçots">Calçots con salsa</span><span>15,00€</span></div>
          <div class="menu-item"><span data-i18n="p_jamon">Jamón del país</span><span>11,00€</span></div>
          <div class="menu-item"><span data-i18n="p_coca">Coca de cebolla</span><span>9,50€</span></div>
          <div class="menu-item"><span data-i18n="p_anchovies">Anchoas de L'Escala (anchoas, zanahoria, remolacha y aceitunas)</span><span>13,80€</span></div>
          <div class="menu-item"><span data-i18n="p_toast_house">Tostada de la casa (Pan tostado con "all i oli", escalivada, anchoas y olivas)</span><span>13,90€</span></div>
        </div>

        <h3 data-i18n="lacarta_mains">SEGUNDOS PLATOS</h3>
        <div class="menu-list" aria-label="Segundos platos">
          <div class="menu-item"><span data-i18n="s_panceta">Panceta con guarnición</span><span>11,50€</span></div>
          <div class="menu-item"><span data-i18n="s_butifarra">Butifarra con guarnición</span><span>11,50€</span></div>
          <div class="menu-item"><span data-i18n="s_morcilla">Morcilla con guarnición</span><span>12,50€</span></div>
          <div class="menu-item"><span data-i18n="s_cordero">Cordero a la brasa con guarnición</span><span>16,60€</span></div>
          <div class="menu-item"><span data-i18n="s_lomo">Lomo a la brasa con guarnición</span><span>10,50€</span></div>
          <div class="menu-item"><span data-i18n="s_codornices">Codornices al ron (una pieza)</span><span>4,45€</span></div>
          <div class="menu-item"><span data-i18n="s_conejo">Conejo a la brasa con guarnición</span><span>14,50€</span></div>
          <div class="menu-item"><span data-i18n="s_picanton">Picantón a la brasa con guarnición</span><span>14,50€</span></div>
          <div class="menu-item"><span data-i18n="s_entrecot">Entrecot a la brasa con guarnición</span><span>21,00€</span></div>
          <div class="menu-item"><span data-i18n="s_churrasco">Churrasco de ternera a la brasa</span><span>14,00€</span></div>
          <div class="menu-item"><span data-i18n="s_pies">Pies de cerdo a la brasa con guarnición</span><span>13,00€</span></div>
          <div class="menu-item"><span data-i18n="s_carrillada">Carrillada de cerdo a la brasa con guarnición</span><span>14,00€</span></div>
          <div class="menu-item"><span data-i18n="s_bacalao">Bacalao al pisto (samfaina)</span><span>17,00€</span></div>
        </div>

        <h3 data-i18n="lacarta_raciones">RACIONES Y EXTRAS</h3>
        <div class="menu-list" aria-label="Raciones y extras">
          <div class="menu-item"><span data-i18n="r_judias">Judías secas</span><span>4,70€</span></div>
          <div class="menu-item"><span data-i18n="r_patatas_fritas">Patatas fritas</span><span>4,50€</span></div>
          <div class="menu-item"><span data-i18n="r_patatas_horno">Patatas al horno</span><span>3,90€</span></div>
          <div class="menu-item"><span data-i18n="r_romesco">Salsa romesco</span><span>3,50€</span></div>
          <div class="menu-item"><span data-i18n="r_alioli">Alioli</span><span>2,50€</span></div>
          <div class="menu-item"><span data-i18n="r_alcachofa">Alcachofa a la brasa, unidad s/t</span><span>2,80€/u</span></div>
          <div class="menu-item"><span data-i18n="r_pan_tostado">Pan tostado (rebanada)</span><span>1,00€/u</span></div>
          <div class="menu-item"><span data-i18n="r_babero">Babero</span><span>0,50€</span></div>
          <div class="menu-item"><span data-i18n="r_taper">Táper</span><span>1,00€</span></div>
        </div>

        <h3 data-i18n="lacarta_kids">MENÚ INFANTIL</h3>
        <div class="menu-list" aria-label="Menú infantil">
          <div class="menu-item"><span data-i18n="kids_combo">Plato combinado: macarrones con tomate, Nuggets de pollo, patatas fritas, refresco y helado (o postre)</span><span>15,00€</span></div>
        </div>

        <!-- Flecha para cerrar -->
        <div class="close-arrow">▲</div>
      </div>
    </details>

    <!-- ========== MENÚ PARA GRUPOS CON BÚSQUEDA ========== -->
    <details class="toggle-section card animate-on-scroll" id="Menú para grupos (MíNimo 12 personas)-section">
      <summary><span data-i18n="groups_title">Menú para grupos (Mínimo 12 personas)</span> <span class="arrow">▼</span></summary>
      <div class="contenido">

        <h3>MENÚ 1</h3>
        <p data-i18n="groups_pica1_title">Pica-pica:</p>
        <ul>
          <li data-i18n="g1_en_salad">Ensalada verde</li>
          <li data-i18n="g1_embutidos">Embutidos variados</li>
          <li data-i18n="g1_coca">Coca de cebolla</li>
          <li data-i18n="g1_croquetas">Croquetas</li>
          <li data-i18n="g1_pan_tostado">Pan tostado con ajo y tomate</li>
        </ul>
        <p data-i18n="groups_second">Segundo a elegir:</p>
        <ul>
          <li data-i18n="g1_butifarra">Butifarra con guarnición</li>
          <li data-i18n="g1_lomo">Lomo con guarnición</li>
          <li data-i18n="g1_pollo">Pollo con guarnición</li>
          <li data-i18n="g1_canelones">Canelones de la abuela</li>
        </ul>
        <p data-i18n="g3_postre">Postres: Pastel de la casa</span></p>
        <p data-i18n="g3_bebidas">Bebidas: Vinos – aguas – refrescos</span></p>
        <p data-i18n="g3_cafés">Cafés</span></p>
        <p><strong>Menu 1: 29€</strong></p>

        <hr>

        <h3>MENÚ 2</h3>
        <p data-i18n="groups_pica2_title">Pica-pica:</p>
        <ul>
          <li data-i18n="g2_ensalada">Ensalada Les Guatlles</li>
          <li data-i18n="g2_coca">Coca de cebolla</li>
          <li data-i18n="g2_escalivada">Escalivada</li>
          <li data-i18n="g2_embutidos">Embutidos variados</li>
          <li data-i18n="g2_croquetas">Croquetas</li>
          <li data-i18n="g2_pan_tostado">Pan tostado con ajo y tomate</li>
        </ul>
        <p data-i18n="groups_second">Segundo a elegir:</p>
        <ul>
          <li data-i18n="g2_butifarra">Butifarra con guarnición</li>
          <li data-i18n="g2_carrillada">Carrillada con guarnición</li>
          <li data-i18n="g2_churrasco">Churrasco con guarnición</li>
          <li data-i18n="g2_pollo">Pollo con guarnición</li>
          <li data-i18n="g2_canelones">Canelones de la abuela</li>
        </ul>
        <p data-i18n="g3_postre">Postres: Pastel de la casa</span></p>
        <p data-i18n="g3_bebidas">Bebidas: Vinos – aguas – refrescos</span></p>
        <p data-i18n="g3_cafés">Cafés</span></p>
        <p><strong>Menu 2: 32€</strong></p>

        <hr>

        <h3>MENÚ 3</h3>
        <p data-i18n="groups_pica3_title">Pica-pica:</p>
        <ul>
          <li data-i18n="g3_ensalada">Ensalada Les Guatlles</li>
          <li data-i18n="g3_embutidos">Embutidos variados</li>
          <li data-i18n="g3_snails">Caracoles a la llauna</li>
          <li data-i18n="g3_coca">Coca de cebolla</li>
          <li data-i18n="g3_escalivada">Escalivada</li>
          <li data-i18n="g3_pan_tostado">Pan tostado con ajo y tomate</li>
        </ul>
        <p data-i18n="groups_second">Segundo a elegir:</p>
        <ul>
          <li data-i18n="g3_butifarra">Butifarra con guarnición</li>
          <li data-i18n="g3_picanton">Picantón con guarnición</li>
          <li data-i18n="g3_entrecot">Entrecot con guarnición</li>
          <li data-i18n="g3_conejo">Conejo con guarnición</li>
          <li data-i18n="g3_bacalao">Bacalao con pisto (samfaina)</li>
        </ul>
        <p data-i18n="g3_postre">Postres: Pastel de la casa</span></p>
        <p data-i18n="g3_bebidas">Bebidas: Vinos – aguas – refrescos</span></p>
        <p data-i18n="g3_cafés">Cafés</span></p>
        <p><strong>Menu 3: 39€</strong></p>

        <hr>

        <h3 data-i18n="groups_kids_title">MENÚ INFANTIL</h3>
        <div class="menu-list">
          <div class="menu-item"><span data-i18n="kids_combo_short">Plato combinado: macarrones con tomate, Nuggets de pollo, patatas fritas, refresco y helado (o postre)</span><span>17€</span></div>
        </div>

        <!-- Flecha para cerrar -->
        <div class="close-arrow">▲</div>
      </div>
    </details>

    <!-- ========== CALCULADORA DE GRUPOS ========== -->
    <section id="calculadora" class="group-calculator animate-on-scroll">
      <h3>Calculadora de Grupos</h3>
      <p>Calcula el precio total para tu grupo (mínimo 12 personas)</p>
      
      <div class="calculator-inputs">
        <div>
          <label>Número de personas:</label>
          <input type="number" class="calc-input" id="groupSize" min="12" value="12" aria-label="Número de personas">
        </div>
        <div>
          <label>Tipo de menú:</label>
          <select class="calc-input" id="menuType" aria-label="Tipo de menú">
            <option value="29">Menú 1 - 29€</option>
            <option value="32">Menú 2 - 32€</option>
            <option value="39">Menú 3 - 39€</option>
          </select>
        </div>
      </div>
      
      <div class="calc-result" id="totalPrice" aria-live="polite">Total: 348€</div>
      </button>
    </section>

    <!-- SECCIONES EXISTENTES -->
    <section id="eventos" class="card animate-on-scroll">
      <h2 data-i18n="menu_events">Eventos</h2>
      <p data-i18n="events_text">Organizamos calçotades, cenas de grupo y celebraciones familiares en nuestro espacio rústico. Consulta disponibilidad para tu evento especial.</p>
    </section>

    <section id="reservas" class="card animate-on-scroll">
      <h2 data-i18n="menu_reserve">Reservas</h2>
      <p data-i18n="reserve_text">Para reservar, por favor llámanos al <strong>+34 977 80 90 22</strong>.</p>
    </section>

    <section id="horario" class="card animate-on-scroll">
      <h2 data-i18n="menu_hours">Horario</h2>
      <table class="schedule" aria-label="Horario">
        <thead>
          <tr>
            <th data-i18n="day">Día</th>
            <th data-i18n="hours">Horario</th>
          </tr>
        </thead>
        <tbody>
          <tr><td data-i18n="monday">Lunes</td><td class="closed" data-i18n="closed">Cerrado</td></tr>
          <tr><td data-i18n="tuesday">Martes</td><td class="closed" data-i18n="closed">Cerrado</td></tr>
          <tr><td data-i18n="wednesday">Miércoles</td><td class="closed" data-i18n="closed">Cerrado</td></tr>
          <tr><td data-i18n="thursday">Jueves</td><td class="closed" data-i18n="closed">Cerrado</td></tr>
          <tr><td data-i18n="friday">Viernes</td><td class="closed">Cerrado</td></tr>
          <tr><td data-i18n="saturday">Sábado</td><td>13:00 - 15:30</td></tr>
          <tr><td data-i18n="sunday">Domingo</td><td>13:00 - 15:30</td></tr>
        </tbody>
      </table>
    </section>

    <section id="ubicacion" class="card animate-on-scroll">
      <h2 data-i18n="menu_location">Ubicación</h2>
      <p data-i18n="address">Disseminat, 8, 43883 Roda de Berà, Tarragona</p>
      <iframe title="Mapa Restaurant Les Guatlles" src="https://www.google.com/maps?q=Restaurant+Les+Guatlles+Roda+de+Berà&output=embed" width="100%" height="250" style="border:0;border-radius:12px" allowfullscreen="" loading="lazy"></iframe>
    </section>

    <section id="galeria" class="card animate-on-scroll">
      <h2 data-i18n="menu_gallery">Galería</h2>
      <div class="gallery" role="list">
        <button data-src="https://tse2.mm.bing.net/th/id/OIP.NeFWFeG1jl9k7wvETfMcuwHaIW?pid=Api" aria-label="Ver imagen 2"><img src="https://tse2.mm.bing.net/th/id/OIP.NeFWFeG1jl9k7wvETfMcuwHaIW?pid=Api" alt="Interior restaurante"></button>
        <button data-src="https://tse2.mm.bing.net/th/id/OIP.O7ewhGLgfSO-NGCan1UeLAHaFj?pid=Api" aria-label="Ver imagen 3"><img src="https://tse2.mm.bing.net/th/id/OIP.O7ewhGLgfSO-NGCan1UeLAHaFj?pid=Api" alt="Exterior masía"></button>
        <button data-src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0e/e3/67/98/amanda-de-la-casa.jpg?w=2000&h=-1&s=1" aria-label="Ver imagen 3"><img src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0e/e3/67/98/amanda-de-la-casa.jpg?w=2000&h=-1&s=1" alt="Exterior masía"></button>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="container" role="contentinfo">
    <span class="social-icons" aria-label="Redes sociales">
      <a href="https://www.instagram.com/restaurantlesguatlles/?hl=es" target="_blank" rel="noopener">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" width="20" height="20">
      </a>
      <a href="https://www.facebook.com/Restaurantlesguatlles/?locale=es_ES" target="_blank" rel="noopener">
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Facebook_icon.svg" alt="Facebook" width="20" height="20">
      </a>
    </span>
    <span>© <span id="year"></span> <span data-i18n="title">Restaurant Les Guatlles</span></span>
  </footer>

  <!-- BOTONES FLOTANTES -->
  <a href="https://wa.me/34977809022" class="whatsapp-btn" target="_blank" rel="noopener" aria-label="Abrir WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
  </a>

  <!-- ASISTENTE VIRTUAL -->
  <div class="assistant-container">
    <div class="assistant-greeting" id="assistantGreeting">
      <p>Hola, ¿tienes alguna duda? ¡Pregúntame!</p>
      <button id="closeGreeting">Entendido</button>
    </div>
    
    <div class="assistant-chat" id="assistantChat">
      <div class="assistant-header">
        <h3>Asistente Virtual</h3>
        <button class="assistant-close" id="closeChat">✕</button>
      </div>
      <div class="assistant-messages" id="assistantMessages">
        <div class="message bot">
          ¡Hola! Soy el asistente virtual de Restaurant Les Guatlles. ¿En qué puedo ayudarte?
        </div>
      </div>
      <div class="assistant-input-container">
        <div class="assistant-input">
          <input type="text" id="assistantInput" placeholder="Escribe tu pregunta..." />
          <button id="sendMessage">Enviar</button>
        </div>
      </div>
    </div>
    
    <button class="assistant-button" id="assistantButton" aria-label="Abrir asistente virtual">
      <i class="fas fa-robot"></i>
    </button>
  </div>

  <script>
    // === INICIALIZACIÓN ===
    document.addEventListener('DOMContentLoaded', function() {
      // Año actual
      document.getElementById('year').textContent = new Date().getFullYear();
      
      // Inicializar calculadora
      initializeCalculator();
      
      // Inicializar búsquedas
      initializeSearches();
      
      // Inicializar animaciones al hacer scroll
      initializeScrollAnimations();
      
      // Inicializar asistente virtual
      initializeAssistant();
      
      // Sistema de navegación existente
      initializeNavigation();
    });

    // === CALCULADORA DE GRUPOS ===
    function initializeCalculator() {
      const groupSize = document.getElementById('groupSize');
      const menuType = document.getElementById('menuType');
      
      function updateCalculation() {
        const people = parseInt(groupSize.value) || 12;
        const price = parseInt(menuType.value);
        const total = people * price;
        
        document.getElementById('totalPrice').textContent = `Total: ${total}€`;
      }
      
      groupSize.addEventListener('input', updateCalculation);
      menuType.addEventListener('change', updateCalculation);
    }

    function showReservationConfirmation() {
      const people = document.getElementById('groupSize').value;
      const menu = document.getElementById('menuType').options[document.getElementById('menuType').selectedIndex].text;
      const total = document.getElementById('totalPrice').textContent;
      
      alert(`Reserva solicitada para ${people} personas con ${menu} (${total})\n\nTe contactaremos para confirmar los detalles.`);
    }

    // === SISTEMA DE BÚSQUEDA ===
    function initializeSearches() {
      // Búsqueda en La Carta
      const cartaSearch = document.getElementById('cartaSearch');
      if (cartaSearch) {
        cartaSearch.addEventListener('input', function(e) {
          filterMenuItems('La Carta-section', e.target.value.toLowerCase());
        });
      }
      
      // Búsqueda en Menús de Grupo
      const gruposSearch = document.getElementById('gruposSearch');
      if (gruposSearch) {
        gruposSearch.addEventListener('input', function(e) {
          filterMenuItems('Menú para grupos (MíNimo 12 personas)-section', e.target.value.toLowerCase());
        });
      }
    }

    function filterMenuItems(sectionId, searchTerm) {
      const section = document.getElementById(sectionId);
      if (!section) return;
      
      const menuItems = section.querySelectorAll('.menu-item');
      let hasVisibleItems = false;
      
      menuItems.forEach(item => {
        const text = item.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
          item.style.display = 'flex';
          hasVisibleItems = true;
          
          // Animación de aparición
          item.style.opacity = '0';
          item.style.transform = 'translateX(-10px)';
          setTimeout(() => {
            item.style.transition = 'all 0.3s ease';
            item.style.opacity = '1';
            item.style.transform = 'translateX(0)';
          }, 50);
        } else {
          item.style.display = 'none';
        }
      });
      
      // Mostrar mensaje si no hay resultados
      const headers = section.querySelectorAll('h3');
      headers.forEach(header => {
        const nextElement = header.nextElementSibling;
        if (nextElement && nextElement.classList.contains('menu-list')) {
          const visibleItems = nextElement.querySelectorAll('.menu-item[style*="display: flex"]');
          if (visibleItems.length === 0) {
            header.style.opacity = '0.5';
          } else {
            header.style.opacity = '1';
          }
        }
      });
    }

    // === ANIMACIONES AL SCROLL ===
    function initializeScrollAnimations() {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animated');
            
            // Efecto escalonado para los elementos del menú
            if (entry.target.classList.contains('toggle-section')) {
              const menuItems = entry.target.querySelectorAll('.menu-item');
              menuItems.forEach((item, index) => {
                setTimeout(() => {
                  item.style.opacity = '0';
                  item.style.transform = 'translateX(-20px)';
                  item.style.transition = 'all 0.5s ease';
                  setTimeout(() => {
                    item.style.opacity = '1';
                    item.style.transform = 'translateX(0)';
                  }, 100);
                }, index * 100);
              });
            }
          }
        });
      }, observerOptions);
      
      // Observar todos los elementos con la clase animate-on-scroll
      document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
      });
    }

    // === ASISTENTE VIRTUAL ===
    function initializeAssistant() {
      const assistantButton = document.getElementById('assistantButton');
      const assistantChat = document.getElementById('assistantChat');
      const assistantMessages = document.getElementById('assistantMessages');
      const assistantInput = document.getElementById('assistantInput');
      const sendMessage = document.getElementById('sendMessage');
      const closeChat = document.getElementById('closeChat');
      const assistantGreeting = document.getElementById('assistantGreeting');
      const closeGreeting = document.getElementById('closeGreeting');

      // Mostrar saludo después de 2 segundos
      setTimeout(() => {
        assistantGreeting.classList.add('active');
      }, 2000);

      // Cerrar saludo
      closeGreeting.addEventListener('click', () => {
        assistantGreeting.classList.remove('active');
      });

      // Abrir/cerrar chat
      assistantButton.addEventListener('click', () => {
        assistantChat.classList.toggle('active');
        assistantGreeting.classList.remove('active');
        if (assistantChat.classList.contains('active')) {
          assistantInput.focus();
        }
      });

      // Cerrar chat
      closeChat.addEventListener('click', () => {
        assistantChat.classList.remove('active');
      });

      // Enviar mensaje
      function sendUserMessage() {
        const message = assistantInput.value.trim();
        if (message === '') return;
        
        addMessage(message, 'user');
        assistantInput.value = '';
        
        setTimeout(() => {
          const response = getAssistantResponse(message);
          addMessage(response, 'bot');
          assistantMessages.scrollTop = assistantMessages.scrollHeight;
        }, 500);
      }

      assistantInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendUserMessage();
        }
      });

      sendMessage.addEventListener('click', sendUserMessage);

      function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}`;
        messageDiv.textContent = text;
        assistantMessages.appendChild(messageDiv);
        assistantMessages.scrollTop = assistantMessages.scrollHeight;
      }

      function getAssistantResponse(message) {
        const normalizedMessage = message.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        
        if (normalizedMessage.includes('hola') || normalizedMessage.includes('buenas')) {
          return '¡Hola! Bienvenido al Restaurant Les Guatlles. ¿En qué puedo ayudarte?';
        }
        
        if (normalizedMessage.includes('reserva') || normalizedMessage.includes('reservar')) {
          return 'Para hacer una reserva, puedes llamarnos al +34 977 80 90 22. Estaremos encantados de atenderte.';
        }
        
        if (normalizedMessage.includes('horario') || normalizedMessage.includes('abierto')) {
          return 'Estamos abiertos los sábados y domingos de 13:00 a 15:30. De lunes a viernes permanecemos cerrados.';
        }
        
        if (normalizedMessage.includes('menu') || normalizedMessage.includes('carta')) {
          return 'Tenemos una amplia carta con platos tradicionales catalanes. Puedes consultar nuestra carta completa en la sección "La Carta".';
        }
        
        if (normalizedMessage.includes('grupo') || normalizedMessage.includes('grupos')) {
          return 'Ofrecemos menús especiales para grupos a partir de 12 personas. Tenemos tres opciones de menú con precios desde 29€.';
        }
        
        if (normalizedMessage.includes('precio') || normalizedMessage.includes('cuanto')) {
          return 'Los precios varían según el plato. Puedes consultar todos los precios en nuestra carta. Los menús para grupos empiezan desde 29€ por persona.';
        }
        
        if (normalizedMessage.includes('gracias')) {
          return '¡De nada! Estoy aquí para ayudarte. ¿Tienes alguna otra pregunta?';
        }
        
        return 'No tengo información específica sobre eso. Para más información, puedes contactarnos al teléfono +34 977 80 90 22. ¿Puedo ayudarte con algo más?';
      }
    }

    // === SISTEMA DE NAVEGACIÓN EXISTENTE ===
    function initializeNavigation() {
      const hamburger = document.getElementById('hamburger');
      const navLinks = document.getElementById('nav-links');

      function toggleMenu() {
        const expanded = hamburger.getAttribute('aria-expanded') === 'true';
        hamburger.setAttribute('aria-expanded', String(!expanded));
        navLinks.classList.toggle('active');
      }
      
      if (hamburger) {
        hamburger.addEventListener('click', toggleMenu);
      }

      // Smooth scroll con offset
      function smoothScrollToTarget(href) {
        const target = document.querySelector(href);
        if (target) {
          navLinks.classList.remove('active');
          hamburger.setAttribute('aria-expanded','false');
          
          const offset = 96;
          const top = target.getBoundingClientRect().top + window.scrollY - offset;
          
          window.scrollTo({ top, behavior: 'smooth' });
        }
      }

      document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
          const href = link.getAttribute('href');
          if (href && href !== '#') {
            e.preventDefault();
            smoothScrollToTarget(href);
          }
        });
      });

      // Sistema de idiomas
      const translations = {
        es: {
          title: 'Restaurant Les Guatlles',
          location: 'Roda de Berà — Tarragona',
          menu_about: 'Inicio',
          menu_menu: 'La Carta',
          menu_groups: 'Menú Grupos',
          menu_calculator: 'Calculadora',
          menu_events: 'Eventos',
          menu_reserve: 'Reservas',
          menu_hours: 'Horario',
          menu_location: 'Ubicación',
          menu_gallery: 'Galería',
          hero_title: 'Restaurant Les Guatlles',
          hero_sub: 'Cocina catalana y casera en un entorno rústico y familiar.',
          about_text: 'En Les Guatlles ofrecemos cocina catalana auténtica en un ambiente rústico y moderno. Nuestro espacio está rodeado de naturaleza y pensado para disfrutar en familia.',
          events_text: 'Organizamos calçotades, cenas de grupo y celebraciones familiares en nuestro espacio rústico. Consulta disponibilidad para tu evento especial.',
          reserve_text: 'Para reservar, por favor llámanos al <strong>+34 977 80 90 22</strong>.',
          address: 'Disseminat, 8, 43883 Roda de Berà, Tarragona',
          day: 'Día',
          hours: 'Horario',
          monday: 'Lunes', tuesday: 'Martes', wednesday: 'Miércoles',
          thursday: 'Jueves', friday: 'Viernes', saturday: 'Sábado', sunday: 'Domingo',
          closed: 'Cerrado',
          lacarta_title: 'La Carta',
          groups_title: 'Menú para grupos (Mínimo 12 personas)'
        },
        ca: {
          title: 'Restaurant Les Guatlles',
          location: 'Roda de Berà — Tarragona',
          menu_about: 'Inici',
          menu_events: 'Esdeveniments',
          menu_reserve: 'Reserves',
          menu_calculator: 'Calculadora',
          reserve_text: 'Per reservar, si us plau truca al <strong>+34 977 80 90 22</strong>.',
          menu_hours: 'Horari',
          menu_location: 'Ubicació',
          menu_gallery: 'Galeria',
          hero_title: 'Restaurant Les Guatlles',
          hero_sub: 'Cuina catalana i casolana en un entorn rústic i familiar.',
          about_text: 'A Les Guatlles oferim cuina catalana autèntica en un ambient rústic i modern. El nostre espai està envoltat de natura i pensat per gaudir en família.',
          events_text: 'Organitzem calçotades, sopars de grup i celebracions familiars al nostre espai rústic. Consulta disponibilitat per al teu esdeveniment especial.',
          address: 'Disseminat, 8, 43883 Roda de Berà, Tarragona',
          day: 'Dia',
          hours: 'Horari',
          monday: 'Dilluns', tuesday: 'Dimarts', wednesday: 'Dimecres',
          thursday: 'Dijous', friday: 'Divendres', saturday: 'Dissabte', sunday: 'Diumenge',
          closed: 'Tancat',
          lacarta_title: 'La Carta',
          groups_title: 'Menú per a grups (Mínim 12 persones)'
        },
        en: {
          title: 'Restaurant Les Guatlles',
          location: 'Roda de Berà — Tarragona',
          menu_about: 'Startup',
          menu_menu: 'Menu',
          menu_events: 'Events',
          menu_reserve: 'Reservations',
          menu_calculator: 'Calculator',
          reserve_text: 'To reserve, please call us at <strong>+34 977 80 90 22</strong>.',
          menu_hours: 'Opening hours',
          menu_location: 'Location',
          menu_gallery: 'Gallery',
          hero_title: 'Restaurant Les Guatlles',
          hero_sub: 'Catalan homemade cuisine in a rustic and family-friendly environment.',
          about_text: 'At Les Guatlles we offer authentic Catalan cuisine in a rustic yet modern atmosphere. Surrounded by nature, our restaurant is perfect for families.',
          events_text: 'We organize calçotades, group dinners and family celebrations in our rustic venue. Check availability for your special event.',
          address: 'Disseminat, 8, 43883 Roda de Berà, Tarragona',
          day: 'Day',
          hours: 'Opening hours',
          monday: 'Monday', tuesday: 'Tuesday', wednesday: 'Wednesday',
          thursday: 'Thursday', friday: 'Friday', saturday: 'Saturday', sunday: 'Sunday',
          closed: 'Closed',
          lacarta_title: 'La Carta / Menu',
          groups_title: 'Group Menus (min. 12 people)'
        }
      };

      const savedLang = localStorage.getItem('lang') || 'es';
      setLanguage(savedLang);

      document.querySelectorAll('.lang-switch button').forEach(btn => {
        btn.addEventListener('click', () => {
          const lang = btn.getAttribute('data-lang');
          setLanguage(lang);
        });
      });

      function setLanguage(lang) {
        try { localStorage.setItem('lang', lang); } catch(e) {}
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (translations[lang] && translations[lang][key]) {
            if (key === 'reserve_text') {
              el.innerHTML = translations[lang][key];
            } else {
              el.textContent = translations[lang][key];
            }
          }
        });
      }
    }

    // === FUNCIONALIDAD PARA FLECHAS DE CIERRE ===
    document.querySelectorAll('.toggle-section').forEach(section => {
      const closeArrow = section.querySelector('.close-arrow');
      if (closeArrow) {
        closeArrow.addEventListener('click', (e) => {
          e.preventDefault();
          section.open = false;
          setTimeout(() => {
            const sectionTop = section.getBoundingClientRect().top + window.scrollY;
            const headerOffset = 96;
            window.scrollTo({
              top: sectionTop - headerOffset,
              behavior: 'smooth'
            });
          }, 100);
        });
      }
    });
  </script>
</body>
</html>
